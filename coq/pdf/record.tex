% generated by Ott 0.31 from: ../spec/rules.ott ../spec/target.ott
\newcommand{\ottdrule}[4][]{{\displaystyle\frac{\begin{array}{l}#2\end{array}}{#3}\quad\ottdrulename{#4}}}
\newcommand{\ottusedrule}[1]{\[#1\]}
\newcommand{\ottpremise}[1]{ #1 \\}
\newenvironment{ottdefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]}{}
\newenvironment{ottfundefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]\begin{displaymath}\begin{array}{l}}{\end{array}\end{displaymath}}
\newcommand{\ottfunclause}[2]{ #1 \equiv #2 \\}
\newcommand{\ottnt}[1]{\mathit{#1}}
\newcommand{\ottmv}[1]{\mathit{#1}}
\newcommand{\ottkw}[1]{\mathbf{#1}}
\newcommand{\ottsym}[1]{#1}
\newcommand{\ottcom}[1]{\text{#1}}
\newcommand{\ottdrulename}[1]{\textsc{#1}}
\newcommand{\ottcomplu}[5]{\overline{#1}^{\,#2\in #3 #4 #5}}
\newcommand{\ottcompu}[3]{\overline{#1}^{\,#2<#3}}
\newcommand{\ottcomp}[2]{\overline{#1}^{\,#2}}
\newcommand{\ottgrammartabular}[1]{\begin{supertabular}{llcllllll}#1\end{supertabular}}
\newcommand{\ottmetavartabular}[1]{\begin{supertabular}{ll}#1\end{supertabular}}
\newcommand{\ottrulehead}[3]{$#1$ & & $#2$ & & & \multicolumn{2}{l}{#3}}
\newcommand{\ottprodline}[6]{& & $#1$ & $#2$ & $#3 #4$ & $#5$ & $#6$}
\newcommand{\ottfirstprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottlongprodline}[2]{& & $#1$ & \multicolumn{4}{l}{$#2$}}
\newcommand{\ottfirstlongprodline}[2]{\ottlongprodline{#1}{#2}}
\newcommand{\ottbindspecprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottprodnewline}{\\}
\newcommand{\ottinterrule}{\\[5.0mm]}
\newcommand{\ottafterlastrule}{\\}
\newcommand{\ottmetavars}{
\ottmetavartabular{
 $ \ottmv{var} ,\, \ottmv{x} ,\, \ottmv{y} $ &  \\
 $ \ottmv{lit} ,\, \ottmv{b} $ &  \\
 $ \ottmv{label} ,\, \ottmv{i} ,\, \ottmv{l} $ &  \\
}}

\newcommand{\otttyp}{
\ottrulehead{\ottnt{typ}  ,\ \ottnt{A}  ,\ \ottnt{B}  ,\ \ottnt{C}}{::=}{\ottcom{types}}\ottprodnewline
\ottfirstprodline{|}{ \top }{}{}{}{\ottcom{top type}}\ottprodnewline
\ottprodline{|}{ \bot }{}{}{}{\ottcom{bottom type}}\ottprodnewline
\ottprodline{|}{ \mathbb{B} }{}{}{}{\ottcom{base type}}\ottprodnewline
\ottprodline{|}{\ottnt{A}  \rightarrow  \ottnt{B}}{}{}{}{\ottcom{function types}}\ottprodnewline
\ottprodline{|}{\ottnt{A}  \, \& \,  \ottnt{B}}{}{}{}{\ottcom{intersection}}\ottprodnewline
\ottprodline{|}{\ottsym{\{}  \ottmv{l}  :  \ottnt{A}  \ottsym{\}}}{}{}{}{\ottcom{record}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{A}  \ottsym{)}} {\textsf{S}}{}{}{}}

\newcommand{\ottexp}{
\ottrulehead{\ottnt{exp}  ,\ \ottnt{e}}{::=}{\ottcom{expressions}}\ottprodnewline
\ottfirstprodline{|}{ \top }{}{}{}{\ottcom{top value}}\ottprodnewline
\ottprodline{|}{ b }{}{}{}{\ottcom{base literal}}\ottprodnewline
\ottprodline{|}{\ottmv{x}}{}{}{}{\ottcom{variables}}\ottprodnewline
\ottprodline{|}{ \lambda \ottmv{x} .\, \ottnt{e} : \ottnt{A} \rightarrow \ottnt{B} }{}{\textsf{bind}\; \ottmv{x}\; \textsf{in}\; \ottnt{e}}{}{\ottcom{abstractions}}\ottprodnewline
\ottprodline{|}{ \mathsf{fix} ~ \ottmv{x} .\, \ottnt{e} : \ottnt{A} }{}{\textsf{bind}\; \ottmv{x}\; \textsf{in}\; \ottnt{e}}{}{\ottcom{fixpoint}}\ottprodnewline
\ottprodline{|}{\ottnt{e_{{\mathrm{1}}}} \, \ottnt{e_{{\mathrm{2}}}}}{}{}{}{\ottcom{applications}}\ottprodnewline
\ottprodline{|}{\ottnt{e_{{\mathrm{1}}}}  \,,,\,  \ottnt{e_{{\mathrm{2}}}}}{}{}{}{\ottcom{merge}}\ottprodnewline
\ottprodline{|}{\ottnt{e}  :  \ottnt{A}}{}{}{}{\ottcom{annotation}}\ottprodnewline
\ottprodline{|}{\ottsym{\{}  \ottmv{l}  \ottsym{=}  \ottnt{e}  \ottsym{\}}}{}{}{}{\ottcom{record}}\ottprodnewline
\ottprodline{|}{\ottnt{e}  \ottsym{.}  \ottmv{l}}{}{}{}{\ottcom{projection}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{e}  \ottsym{)}} {\textsf{S}}{}{}{}}

\newcommand{\ottctx}{
\ottrulehead{\ottnt{ctx}  ,\ \Gamma}{::=}{\ottcom{typing context}}\ottprodnewline
\ottfirstprodline{|}{ \cdot }{}{}{}{\ottcom{empty context}}\ottprodnewline
\ottprodline{|}{\Gamma  ,  \ottmv{x}  :  \ottnt{A}}{}{}{}{\ottcom{assumption}}}

\newcommand{\ottdirflag}{
\ottrulehead{\ottnt{dirflag}}{::=}{\ottcom{checking direction}}\ottprodnewline
\ottfirstprodline{|}{\Rightarrow}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Leftarrow}{}{}{}{}}

\newcommand{\ottttyp}{
\ottrulehead{\ottnt{ttyp}  ,\ \ottnt{At}  ,\ \ottnt{Bt}  ,\ \ottnt{Ct}}{::=}{\ottcom{types}}\ottprodnewline
\ottfirstprodline{|}{ \top }{}{}{}{\ottcom{top type}}\ottprodnewline
\ottprodline{|}{ \bot }{}{}{}{\ottcom{bottom type}}\ottprodnewline
\ottprodline{|}{ \mathbb{B} }{}{}{}{\ottcom{base type}}\ottprodnewline
\ottprodline{|}{\ottnt{At}  \rightarrow  \ottnt{Bt}}{}{}{}{\ottcom{function types}}\ottprodnewline
\ottprodline{|}{ \{  \ottnt{ll}   :   \ottnt{At}   ,   \ottnt{Bt}   \} }{}{}{}{\ottcom{record}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{At}  \ottsym{)}} {\textsf{S}}{}{}{}}

\newcommand{\otttindex}{
\ottrulehead{\ottnt{tindex}  ,\ \ottnt{ll}  ,\ \ottnt{T}  ,\ \ottnt{K}}{::=}{\ottcom{Type indices}}\ottprodnewline
\ottfirstprodline{|}{ \mathbb{B} }{}{}{}{\ottcom{base type}}\ottprodnewline
\ottprodline{|}{ \overrightarrow{ \ottnt{T} } }{}{}{}{\ottcom{function type}}\ottprodnewline
\ottprodline{|}{\ottsym{\{}  \ottmv{l}  :  \ottnt{T}  \ottsym{\}}}{}{}{}{\ottcom{record type}}\ottprodnewline
\ottprodline{|}{\ottnt{T_{{\mathrm{1}}}}  \, \& \,  \ottnt{T_{{\mathrm{2}}}}}{}{}{}{\ottcom{intersection type}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{A}  \ottsym{)}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{l}}{}{}{}{}}

\newcommand{\otttexp}{
\ottrulehead{\ottnt{texp}  ,\ \ottnt{t}  ,\ \ottnt{te}  ,\ \ottnt{tp}  ,\ \ottnt{tv}  ,\ \ottnt{tu}}{::=}{\ottcom{target term}}\ottprodnewline
\ottfirstprodline{|}{\ottmv{x}}{}{}{}{\ottcom{variable}}\ottprodnewline
\ottprodline{|}{ \mathsf{ \ottmv{b} } }{}{}{}{\ottcom{base value}}\ottprodnewline
\ottprodline{|}{\lambda  \ottmv{x}  \ottsym{.}  \ottnt{t}}{}{\textsf{bind}\; \ottmv{x}\; \textsf{in}\; \ottnt{t}}{}{\ottcom{abstractions}}\ottprodnewline
\ottprodline{|}{\mathsf{fix} \, \ottmv{x}  \ottsym{.}  \ottnt{t}}{}{\textsf{bind}\; \ottmv{x}\; \textsf{in}\; \ottnt{t}}{}{\ottcom{fixpoint}}\ottprodnewline
\ottprodline{|}{\ottnt{t_{{\mathrm{1}}}} \, \ottnt{t_{{\mathrm{2}}}}}{}{}{}{\ottcom{applications}}\ottprodnewline
\ottprodline{|}{ \{ \} }{}{}{}{\ottcom{empty record}}\ottprodnewline
\ottprodline{|}{ \{  \ottnt{ll}   \Rightarrow   \ottnt{t'_{{\mathrm{1}}}}   ,   \ottnt{t_{{\mathrm{2}}}}   \} }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{\{}  \ottnt{ll}  \Rightarrow  \ottnt{t'_{{\mathrm{1}}}}  \ottsym{\}}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{t_{{\mathrm{1}}}}  \ottsym{.}  \ottnt{ll}}{}{}{}{\ottcom{projection}}\ottprodnewline
\ottprodline{|}{\ottnt{t_{{\mathrm{1}}}}  ;  \ottnt{t_{{\mathrm{2}}}}}{}{}{}{\ottcom{concatenation}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{t}  \ottsym{)}} {\textsf{S}}{}{}{}}

\newcommand{\otttctx}{
\ottrulehead{\ottnt{tctx}  ,\ \Gamma}{::=}{\ottcom{typing context}}\ottprodnewline
\ottfirstprodline{|}{ \cdot }{}{}{}{\ottcom{empty context}}\ottprodnewline
\ottprodline{|}{\Gamma  ,  \ottmv{x}  :  \ottnt{At}}{}{}{}{\ottcom{assumption}}}

\newcommand{\ottgrammar}{\ottgrammartabular{
\otttyp\ottinterrule
\ottexp\ottinterrule
\ottctx\ottinterrule
\ottdirflag\ottinterrule
\ottttyp\ottinterrule
\otttindex\ottinterrule
\otttexp\ottinterrule
\otttctx\ottafterlastrule
}}

% defnss
% defns TopLikeType
%% defn toplike
\newcommand{\ottdruleTLXXtop}[1]{\ottdrule[#1]{%
}{
 \rceil  \top  \lceil }{%
{\ottdrulename{TL\_top}}{}%
}}


\newcommand{\ottdruleTLXXand}[1]{\ottdrule[#1]{%
\ottpremise{ \rceil \ottnt{A} \lceil }%
\ottpremise{ \rceil \ottnt{B} \lceil }%
}{
 \rceil \ottnt{A}  \, \& \,  \ottnt{B} \lceil }{%
{\ottdrulename{TL\_and}}{}%
}}


\newcommand{\ottdruleTLXXarr}[1]{\ottdrule[#1]{%
\ottpremise{ \rceil \ottnt{B} \lceil }%
}{
 \rceil \ottnt{A}  \rightarrow  \ottnt{B} \lceil }{%
{\ottdrulename{TL\_arr}}{}%
}}


\newcommand{\ottdruleTLXXrcd}[1]{\ottdrule[#1]{%
\ottpremise{ \rceil \ottnt{B} \lceil }%
}{
 \rceil \ottsym{\{}  \ottmv{l}  :  \ottnt{B}  \ottsym{\}} \lceil }{%
{\ottdrulename{TL\_rcd}}{}%
}}

\newcommand{\ottdefntoplike}[1]{\begin{ottdefnblock}[#1]{$ \rceil \ottnt{A} \lceil $}{\ottcom{Top-like Types}}
\ottusedrule{\ottdruleTLXXtop{}}
\ottusedrule{\ottdruleTLXXand{}}
\ottusedrule{\ottdruleTLXXarr{}}
\ottusedrule{\ottdruleTLXXrcd{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsTopLikeType}{
\ottdefntoplike{}}

% defns EqIndexType
%% defn eqIndTyp
\newcommand{\ottdruleEIXXtrans}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{A}  \approx  \ottnt{B}}%
\ottpremise{\ottnt{B}  \approx  \ottnt{C}}%
}{
\ottnt{A}  \approx  \ottnt{C}}{%
{\ottdrulename{EI\_trans}}{}%
}}


\newcommand{\ottdruleEIXXsymm}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{B}  \approx  \ottnt{A}}%
}{
\ottnt{A}  \approx  \ottnt{B}}{%
{\ottdrulename{EI\_symm}}{}%
}}


\newcommand{\ottdruleEIXXarrow}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{A_{{\mathrm{1}}}}  \approx  \ottnt{A_{{\mathrm{2}}}}}%
\ottpremise{\ottnt{B_{{\mathrm{1}}}}  \approx  \ottnt{B_{{\mathrm{2}}}}}%
}{
\ottnt{A_{{\mathrm{1}}}}  \rightarrow  \ottnt{B_{{\mathrm{1}}}}  \approx  \ottnt{A_{{\mathrm{2}}}}  \rightarrow  \ottnt{B_{{\mathrm{2}}}}}{%
{\ottdrulename{EI\_arrow}}{}%
}}


\newcommand{\ottdruleEIXXrcd}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{A}  \approx  \ottnt{B}}%
}{
\ottsym{\{}  \ottmv{l}  :  \ottnt{A}  \ottsym{\}}  \approx  \ottsym{\{}  \ottmv{l}  :  \ottnt{B}  \ottsym{\}}}{%
{\ottdrulename{EI\_rcd}}{}%
}}


\newcommand{\ottdruleEIXXand}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{A}  \approx  \ottnt{A'}}%
}{
\ottnt{A}  \, \& \,  \ottnt{B}  \approx  \ottnt{A'}  \, \& \,  \ottnt{B}}{%
{\ottdrulename{EI\_and}}{}%
}}


\newcommand{\ottdruleEIXXcomm}[1]{\ottdrule[#1]{%
}{
\ottnt{A}  \, \& \,  \ottnt{B}  \approx  \ottnt{B}  \, \& \,  \ottnt{A}}{%
{\ottdrulename{EI\_comm}}{}%
}}


\newcommand{\ottdruleEIXXassoc}[1]{\ottdrule[#1]{%
}{
\ottnt{A}  \, \& \,  \ottsym{(}  \ottnt{B}  \, \& \,  \ottnt{C}  \ottsym{)}  \approx  \ottsym{(}  \ottnt{A}  \, \& \,  \ottnt{B}  \ottsym{)}  \, \& \,  \ottnt{C}}{%
{\ottdrulename{EI\_assoc}}{}%
}}


\newcommand{\ottdruleEIXXtop}[1]{\ottdrule[#1]{%
\ottpremise{ \rceil \ottnt{A} \lceil }%
}{
\ottnt{A}  \, \& \,  \ottnt{B}  \approx  \ottnt{B}}{%
{\ottdrulename{EI\_top}}{}%
}}


\newcommand{\ottdruleEIXXdup}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{A_{{\mathrm{1}}}}  \approx  \ottnt{A_{{\mathrm{2}}}}}%
}{
\ottsym{(}  \ottnt{A_{{\mathrm{1}}}}  \, \& \,  \ottnt{A_{{\mathrm{2}}}}  \ottsym{)}  \, \& \,  \ottnt{B}  \approx  \ottnt{A_{{\mathrm{1}}}}  \, \& \,  \ottnt{B}}{%
{\ottdrulename{EI\_dup}}{}%
}}

\newcommand{\ottdefneqIndTyp}[1]{\begin{ottdefnblock}[#1]{$\ottnt{A}  \approx  \ottnt{B}$}{\ottcom{Types with the same index}}
\ottusedrule{\ottdruleEIXXtrans{}}
\ottusedrule{\ottdruleEIXXsymm{}}
\ottusedrule{\ottdruleEIXXarrow{}}
\ottusedrule{\ottdruleEIXXrcd{}}
\ottusedrule{\ottdruleEIXXand{}}
\ottusedrule{\ottdruleEIXXcomm{}}
\ottusedrule{\ottdruleEIXXassoc{}}
\ottusedrule{\ottdruleEIXXtop{}}
\ottusedrule{\ottdruleEIXXdup{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsEqIndexType}{
\ottdefneqIndTyp{}}

% defns SplitType
%% defn spl
\newcommand{\ottdruleSpXXand}[1]{\ottdrule[#1]{%
}{
 \ottsym{(}  \ottnt{A}  \ottsym{)}  \lhd\, \ottsym{(}  \ottnt{A}  \, \& \,  \ottnt{B}  \ottsym{)} \,\rhd  \ottsym{(}  \ottnt{B}  \ottsym{)} }{%
{\ottdrulename{Sp\_and}}{}%
}}


\newcommand{\ottdruleSpXXarrow}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{B_{{\mathrm{1}}}}  \lhd\, \ottnt{B} \,\rhd  \ottnt{B_{{\mathrm{2}}}} }%
}{
 \ottsym{(}  \ottnt{A}  \rightarrow  \ottnt{B_{{\mathrm{1}}}}  \ottsym{)}  \lhd\, \ottsym{(}  \ottnt{A}  \rightarrow  \ottnt{B}  \ottsym{)} \,\rhd  \ottsym{(}  \ottnt{A}  \rightarrow  \ottnt{B_{{\mathrm{2}}}}  \ottsym{)} }{%
{\ottdrulename{Sp\_arrow}}{}%
}}


\newcommand{\ottdruleSpXXrcd}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{B_{{\mathrm{1}}}}  \lhd\, \ottnt{B} \,\rhd  \ottnt{B_{{\mathrm{2}}}} }%
}{
 \ottsym{\{}  \ottmv{l}  :  \ottnt{B_{{\mathrm{1}}}}  \ottsym{\}}  \lhd\, \ottsym{\{}  \ottmv{l}  :  \ottnt{B}  \ottsym{\}} \,\rhd  \ottsym{\{}  \ottmv{l}  :  \ottnt{B_{{\mathrm{2}}}}  \ottsym{\}} }{%
{\ottdrulename{Sp\_rcd}}{}%
}}

\newcommand{\ottdefnspl}[1]{\begin{ottdefnblock}[#1]{$ \ottnt{B}  \lhd\, \ottnt{A} \,\rhd  \ottnt{C} $}{\ottcom{Split a Type into Two}}
\ottusedrule{\ottdruleSpXXand{}}
\ottusedrule{\ottdruleSpXXarrow{}}
\ottusedrule{\ottdruleSpXXrcd{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsSplitType}{
\ottdefnspl{}}

% defns OrdinaryType
%% defn ord
\newcommand{\ottdruleOXXtop}[1]{\ottdrule[#1]{%
}{
  \top  ~ \mathsf{Ordinary} }{%
{\ottdrulename{O\_top}}{}%
}}


\newcommand{\ottdruleOXXint}[1]{\ottdrule[#1]{%
}{
  \mathbb{B}  ~ \mathsf{Ordinary} }{%
{\ottdrulename{O\_int}}{}%
}}


\newcommand{\ottdruleOXXarrow}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{B} ~ \mathsf{Ordinary} }%
}{
 \ottnt{A}  \rightarrow  \ottnt{B} ~ \mathsf{Ordinary} }{%
{\ottdrulename{O\_arrow}}{}%
}}


\newcommand{\ottdruleOXXrcd}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{B} ~ \mathsf{Ordinary} }%
}{
 \ottsym{\{}  \ottmv{l}  :  \ottnt{B}  \ottsym{\}} ~ \mathsf{Ordinary} }{%
{\ottdrulename{O\_rcd}}{}%
}}

\newcommand{\ottdefnord}[1]{\begin{ottdefnblock}[#1]{$ \ottnt{A} ~ \mathsf{Ordinary} $}{\ottcom{Ordinary Types}}
\ottusedrule{\ottdruleOXXtop{}}
\ottusedrule{\ottdruleOXXint{}}
\ottusedrule{\ottdruleOXXarrow{}}
\ottusedrule{\ottdruleOXXrcd{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsOrdinaryType}{
\ottdefnord{}}

% defns Disjoint
%% defn disjoint
\newcommand{\ottdruleDXXtopL}[1]{\ottdrule[#1]{%
}{
 \top   *  \ottnt{A}}{%
{\ottdrulename{D\_topL}}{}%
}}


\newcommand{\ottdruleDXXtopR}[1]{\ottdrule[#1]{%
}{
\ottnt{A}  *   \top }{%
{\ottdrulename{D\_topR}}{}%
}}


\newcommand{\ottdruleDXXandL}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{A_{{\mathrm{1}}}}  *  \ottnt{B}}%
\ottpremise{\ottnt{A_{{\mathrm{2}}}}  *  \ottnt{B}}%
}{
\ottnt{A_{{\mathrm{1}}}}  \, \& \,  \ottnt{A_{{\mathrm{2}}}}  *  \ottnt{B}}{%
{\ottdrulename{D\_andL}}{}%
}}


\newcommand{\ottdruleDXXandR}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{A}  *  \ottnt{B_{{\mathrm{1}}}}}%
\ottpremise{\ottnt{A}  *  \ottnt{B_{{\mathrm{2}}}}}%
}{
\ottnt{A}  *  \ottnt{B_{{\mathrm{1}}}}  \, \& \,  \ottnt{B_{{\mathrm{2}}}}}{%
{\ottdrulename{D\_andR}}{}%
}}


\newcommand{\ottdruleDXXBaseArr}[1]{\ottdrule[#1]{%
}{
 \mathbb{B}   *  \ottnt{A_{{\mathrm{1}}}}  \rightarrow  \ottnt{A_{{\mathrm{2}}}}}{%
{\ottdrulename{D\_BaseArr}}{}%
}}


\newcommand{\ottdruleDXXArrBase}[1]{\ottdrule[#1]{%
}{
\ottnt{A_{{\mathrm{1}}}}  \rightarrow  \ottnt{A_{{\mathrm{2}}}}  *   \mathbb{B} }{%
{\ottdrulename{D\_ArrBase}}{}%
}}


\newcommand{\ottdruleDXXArrArr}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{A_{{\mathrm{2}}}}  *  \ottnt{B_{{\mathrm{2}}}}}%
}{
\ottnt{A_{{\mathrm{1}}}}  \rightarrow  \ottnt{A_{{\mathrm{2}}}}  *  \ottnt{B_{{\mathrm{1}}}}  \rightarrow  \ottnt{B_{{\mathrm{2}}}}}{%
{\ottdrulename{D\_ArrArr}}{}%
}}


\newcommand{\ottdruleDXXrcdEq}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{A}  *  \ottnt{B}}%
}{
\ottsym{\{}  \ottmv{l}  :  \ottnt{A}  \ottsym{\}}  *  \ottsym{\{}  \ottmv{l}  :  \ottnt{B}  \ottsym{\}}}{%
{\ottdrulename{D\_rcdEq}}{}%
}}


\newcommand{\ottdruleDXXrcdNeq}[1]{\ottdrule[#1]{%
\ottpremise{ \ottmv{l_{{\mathrm{1}}}}  \neq  \ottmv{l_{{\mathrm{2}}}} }%
}{
\ottsym{\{}  \ottmv{l_{{\mathrm{1}}}}  :  \ottnt{A}  \ottsym{\}}  *  \ottsym{\{}  \ottmv{l_{{\mathrm{2}}}}  :  \ottnt{B}  \ottsym{\}}}{%
{\ottdrulename{D\_rcdNeq}}{}%
}}


\newcommand{\ottdruleDXXBaseRcd}[1]{\ottdrule[#1]{%
}{
 \mathbb{B}   *  \ottsym{\{}  \ottmv{l}  :  \ottnt{A}  \ottsym{\}}}{%
{\ottdrulename{D\_BaseRcd}}{}%
}}


\newcommand{\ottdruleDXXRcdBase}[1]{\ottdrule[#1]{%
}{
\ottsym{\{}  \ottmv{l}  :  \ottnt{A}  \ottsym{\}}  *   \mathbb{B} }{%
{\ottdrulename{D\_RcdBase}}{}%
}}


\newcommand{\ottdruleDXXArrRcd}[1]{\ottdrule[#1]{%
}{
\ottnt{A_{{\mathrm{1}}}}  \rightarrow  \ottnt{A_{{\mathrm{2}}}}  *  \ottsym{\{}  \ottmv{l}  :  \ottnt{A}  \ottsym{\}}}{%
{\ottdrulename{D\_ArrRcd}}{}%
}}


\newcommand{\ottdruleDXXRcdArr}[1]{\ottdrule[#1]{%
}{
\ottsym{\{}  \ottmv{l}  :  \ottnt{A}  \ottsym{\}}  *  \ottnt{A_{{\mathrm{1}}}}  \rightarrow  \ottnt{A_{{\mathrm{2}}}}}{%
{\ottdrulename{D\_RcdArr}}{}%
}}

\newcommand{\ottdefndisjoint}[1]{\begin{ottdefnblock}[#1]{$\ottnt{A}  *  \ottnt{B}$}{\ottcom{Type Disjointness (Algorithmic)}}
\ottusedrule{\ottdruleDXXtopL{}}
\ottusedrule{\ottdruleDXXtopR{}}
\ottusedrule{\ottdruleDXXandL{}}
\ottusedrule{\ottdruleDXXandR{}}
\ottusedrule{\ottdruleDXXBaseArr{}}
\ottusedrule{\ottdruleDXXArrBase{}}
\ottusedrule{\ottdruleDXXArrArr{}}
\ottusedrule{\ottdruleDXXrcdEq{}}
\ottusedrule{\ottdruleDXXrcdNeq{}}
\ottusedrule{\ottdruleDXXBaseRcd{}}
\ottusedrule{\ottdruleDXXRcdBase{}}
\ottusedrule{\ottdruleDXXArrRcd{}}
\ottusedrule{\ottdruleDXXRcdArr{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsDisjoint}{
\ottdefndisjoint{}}

% defns CoMerge
%% defn comerge
\newcommand{\ottdruleMXXAnd}[1]{\ottdrule[#1]{%
}{
\ottnt{t_{{\mathrm{1}}}}  :  \ottnt{A}  \rhd  \ottnt{A}  \, \& \,  \ottnt{B}  \lhd  \ottnt{t_{{\mathrm{2}}}}  :  \ottnt{B}  \rightsquigarrow  \ottnt{t_{{\mathrm{1}}}}  ;  \ottnt{t_{{\mathrm{2}}}}}{%
{\ottdrulename{M\_And}}{}%
}}


\newcommand{\ottdruleMXXArrow}[1]{\ottdrule[#1]{%
\ottpremise{\ottsym{(}  \ottnt{t_{{\mathrm{1}}}}  \ottsym{.}   | \ottnt{A}  \rightarrow  \ottnt{B_{{\mathrm{1}}}} |   \ottsym{)} \, \ottmv{x}  :  \ottnt{B_{{\mathrm{1}}}}  \rhd  \ottnt{B}  \lhd  \ottsym{(}  \ottnt{t_{{\mathrm{2}}}}  \ottsym{.}   | \ottnt{A}  \rightarrow  \ottnt{B_{{\mathrm{2}}}} |   \ottsym{)} \, \ottmv{x}  :  \ottnt{B_{{\mathrm{2}}}}  \rightsquigarrow  \ottnt{t}}%
}{
\ottnt{t_{{\mathrm{1}}}}  :  \ottnt{A}  \rightarrow  \ottnt{B_{{\mathrm{1}}}}  \rhd  \ottnt{A}  \rightarrow  \ottnt{B}  \lhd  \ottnt{t_{{\mathrm{2}}}}  :  \ottnt{A}  \rightarrow  \ottnt{B_{{\mathrm{2}}}}  \rightsquigarrow  \ottsym{\{}   | \ottnt{A}  \rightarrow  \ottnt{B} |   \Rightarrow  \lambda  \ottmv{x}  \ottsym{.}  \ottnt{t}  \ottsym{\}}}{%
{\ottdrulename{M\_Arrow}}{}%
}}


\newcommand{\ottdruleMXXRcd}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{t_{{\mathrm{1}}}}  \ottsym{.}   | \ottsym{\{}  \ottmv{l}  :  \ottnt{A_{{\mathrm{1}}}}  \ottsym{\}} |   :  \ottnt{A_{{\mathrm{1}}}}  \rhd  \ottnt{A}  \lhd  \ottnt{t_{{\mathrm{2}}}}  \ottsym{.}   | \ottsym{\{}  \ottmv{l}  :  \ottnt{A_{{\mathrm{2}}}}  \ottsym{\}} |   :  \ottnt{A_{{\mathrm{2}}}}  \rightsquigarrow  \ottnt{t}}%
}{
\ottnt{t_{{\mathrm{1}}}}  :  \ottsym{\{}  \ottmv{l}  :  \ottnt{A_{{\mathrm{1}}}}  \ottsym{\}}  \rhd  \ottsym{\{}  \ottmv{l}  :  \ottnt{A}  \ottsym{\}}  \lhd  \ottnt{t_{{\mathrm{2}}}}  :  \ottsym{\{}  \ottmv{l}  :  \ottnt{A_{{\mathrm{2}}}}  \ottsym{\}}  \rightsquigarrow  \ottsym{\{}   | \ottsym{\{}  \ottmv{l}  :  \ottnt{A}  \ottsym{\}} |   \Rightarrow  \ottnt{t}  \ottsym{\}}}{%
{\ottdrulename{M\_Rcd}}{}%
}}

\newcommand{\ottdefncomerge}[1]{\begin{ottdefnblock}[#1]{$\ottnt{t_{{\mathrm{1}}}}  :  \ottnt{A}  \rhd  \ottnt{C}  \lhd  \ottnt{t_{{\mathrm{2}}}}  :  \ottnt{B}  \rightsquigarrow  \ottnt{t}$}{\ottcom{Coercive merging}}
\ottusedrule{\ottdruleMXXAnd{}}
\ottusedrule{\ottdruleMXXArrow{}}
\ottusedrule{\ottdruleMXXRcd{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsCoMerge}{
\ottdefncomerge{}}

% defns CoSubtyping
%% defn cosub
\newcommand{\ottdruleSXXTop}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{B} ~ \mathsf{Ordinary} }%
\ottpremise{ \rceil \ottnt{B} \lceil }%
}{
\ottnt{t}  :  \ottnt{A}  \ottsym{<:}  \ottnt{B}  \rightsquigarrow   \{ \} }{%
{\ottdrulename{S\_Top}}{}%
}}


\newcommand{\ottdruleSXXBot}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{B} ~ \mathsf{Ordinary} }%
\ottpremise{ \neg   \rceil \ottnt{B} \lceil  }%
}{
\ottnt{t}  :   \bot   \ottsym{<:}  \ottnt{B}  \rightsquigarrow  \ottsym{\{}   | \ottnt{B} |   \Rightarrow  \mathsf{fix} \, \ottmv{x}  \ottsym{.}  \ottmv{x}  \ottsym{\}}}{%
{\ottdrulename{S\_Bot}}{}%
}}


\newcommand{\ottdruleSXXBase}[1]{\ottdrule[#1]{%
}{
\ottnt{t}  :   \mathbb{B}   \ottsym{<:}   \mathbb{B}   \rightsquigarrow  \ottsym{\{}   |  \mathbb{B}  |   \Rightarrow  \ottnt{t}  \ottsym{.}   |  \mathbb{B}  |   \ottsym{\}}}{%
{\ottdrulename{S\_Base}}{}%
}}


\newcommand{\ottdruleSXXArrow}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{B_{{\mathrm{2}}}} ~ \mathsf{Ordinary} }%
\ottpremise{ \neg   \rceil \ottnt{B_{{\mathrm{2}}}} \lceil  }%
\ottpremise{ \ottmv{x}  :  \ottnt{B_{{\mathrm{1}}}}  \ottsym{<:}  \ottnt{A_{{\mathrm{1}}}}  \rightsquigarrow  \ottnt{t_{{\mathrm{1}}}} ~\land~ \ottsym{(}  \ottnt{t}  \ottsym{.}   | \ottnt{A_{{\mathrm{1}}}}  \rightarrow  \ottnt{A_{{\mathrm{2}}}} |   \ottsym{)} \, \ottnt{t_{{\mathrm{1}}}}  :  \ottnt{A_{{\mathrm{2}}}}  \ottsym{<:}  \ottnt{B_{{\mathrm{2}}}}  \rightsquigarrow  \ottnt{t_{{\mathrm{2}}}} }%
}{
\ottnt{t}  :  \ottnt{A_{{\mathrm{1}}}}  \rightarrow  \ottnt{A_{{\mathrm{2}}}}  \ottsym{<:}  \ottnt{B_{{\mathrm{1}}}}  \rightarrow  \ottnt{B_{{\mathrm{2}}}}  \rightsquigarrow  \ottsym{\{}   | \ottnt{B_{{\mathrm{1}}}}  \rightarrow  \ottnt{B_{{\mathrm{2}}}} |   \Rightarrow  \lambda  \ottmv{x}  \ottsym{.}  \ottnt{t_{{\mathrm{2}}}}  \ottsym{\}}}{%
{\ottdrulename{S\_Arrow}}{}%
}}


\newcommand{\ottdruleSXXRcd}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{B} ~ \mathsf{Ordinary} }%
\ottpremise{ \neg   \rceil \ottnt{B} \lceil  }%
\ottpremise{\ottnt{t}  \ottsym{.}   | \ottsym{\{}  \ottmv{l}  :  \ottnt{A}  \ottsym{\}} |   :  \ottnt{A}  \ottsym{<:}  \ottnt{B}  \rightsquigarrow  \ottnt{t_{{\mathrm{2}}}}}%
}{
\ottnt{t}  :  \ottsym{\{}  \ottmv{l}  :  \ottnt{A}  \ottsym{\}}  \ottsym{<:}  \ottsym{\{}  \ottmv{l}  :  \ottnt{B}  \ottsym{\}}  \rightsquigarrow  \ottsym{\{}   | \ottsym{\{}  \ottmv{l}  :  \ottnt{B}  \ottsym{\}} |   \Rightarrow  \ottnt{t_{{\mathrm{2}}}}  \ottsym{\}}}{%
{\ottdrulename{S\_Rcd}}{}%
}}


\newcommand{\ottdruleSXXAndL}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{C} ~ \mathsf{Ordinary} }%
\ottpremise{\ottnt{t}  :  \ottnt{A}  \ottsym{<:}  \ottnt{C}  \rightsquigarrow  \ottnt{t'}}%
}{
\ottnt{t}  :  \ottnt{A}  \, \& \,  \ottnt{B}  \ottsym{<:}  \ottnt{C}  \rightsquigarrow  \ottnt{t'}}{%
{\ottdrulename{S\_AndL}}{}%
}}


\newcommand{\ottdruleSXXAndR}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{C} ~ \mathsf{Ordinary} }%
\ottpremise{\ottnt{t}  :  \ottnt{B}  \ottsym{<:}  \ottnt{C}  \rightsquigarrow  \ottnt{t'}}%
}{
\ottnt{t}  :  \ottnt{A}  \, \& \,  \ottnt{B}  \ottsym{<:}  \ottnt{C}  \rightsquigarrow  \ottnt{t'}}{%
{\ottdrulename{S\_AndR}}{}%
}}


\newcommand{\ottdruleSXXSplit}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{B_{{\mathrm{1}}}}  \lhd\, \ottnt{B} \,\rhd  \ottnt{B_{{\mathrm{2}}}} }%
\ottpremise{\ottnt{t}  :  \ottnt{A}  \ottsym{<:}  \ottnt{B_{{\mathrm{1}}}}  \rightsquigarrow  \ottnt{t_{{\mathrm{1}}}}}%
\ottpremise{\ottnt{t}  :  \ottnt{A}  \ottsym{<:}  \ottnt{B_{{\mathrm{2}}}}  \rightsquigarrow  \ottnt{t_{{\mathrm{2}}}}}%
\ottpremise{\ottnt{t_{{\mathrm{1}}}}  :  \ottnt{B_{{\mathrm{1}}}}  \rhd  \ottnt{B}  \lhd  \ottnt{t_{{\mathrm{2}}}}  :  \ottnt{B_{{\mathrm{2}}}}  \rightsquigarrow  \ottnt{t_{{\mathrm{3}}}}}%
}{
\ottnt{t}  :  \ottnt{A}  \ottsym{<:}  \ottnt{B}  \rightsquigarrow  \ottnt{t_{{\mathrm{3}}}}}{%
{\ottdrulename{S\_Split}}{}%
}}

\newcommand{\ottdefncosub}[1]{\begin{ottdefnblock}[#1]{$\ottnt{t_{{\mathrm{1}}}}  :  \ottnt{A}  \ottsym{<:}  \ottnt{B}  \rightsquigarrow  \ottnt{t_{{\mathrm{2}}}}$}{\ottcom{Coercive subtyping}}
\ottusedrule{\ottdruleSXXTop{}}
\ottusedrule{\ottdruleSXXBot{}}
\ottusedrule{\ottdruleSXXBase{}}
\ottusedrule{\ottdruleSXXArrow{}}
\ottusedrule{\ottdruleSXXRcd{}}
\ottusedrule{\ottdruleSXXAndL{}}
\ottusedrule{\ottdruleSXXAndR{}}
\ottusedrule{\ottdruleSXXSplit{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsCoSubtyping}{
\ottdefncosub{}}

% defns Projection
%% defn proj
\newcommand{\ottdrulePXXTop}[1]{\ottdrule[#1]{%
\ottpremise{ \rceil \ottnt{A} \lceil }%
}{
\ottnt{t_{{\mathrm{1}}}}  :  \ottnt{A}  ;  \ottsym{\{}  \ottmv{l}  \ottsym{\}}  \rightsquigarrow   \{ \}   :   \top }{%
{\ottdrulename{P\_Top}}{}%
}}


\newcommand{\ottdrulePXXRcdEq}[1]{\ottdrule[#1]{%
}{
\ottnt{t}  :  \ottsym{\{}  \ottmv{l}  :  \ottnt{A}  \ottsym{\}}  ;  \ottsym{\{}  \ottmv{l}  \ottsym{\}}  \rightsquigarrow  \ottnt{t}  \ottsym{.}  \ottsym{\{}  \ottmv{l}  :   | \ottnt{A} |   \ottsym{\}}  :  \ottnt{A}}{%
{\ottdrulename{P\_RcdEq}}{}%
}}


\newcommand{\ottdrulePXXRcdNeq}[1]{\ottdrule[#1]{%
\ottpremise{ \ottmv{l_{{\mathrm{1}}}}  \neq  \ottmv{l_{{\mathrm{2}}}} }%
}{
\ottnt{t}  :  \ottsym{\{}  \ottmv{l_{{\mathrm{1}}}}  :  \ottnt{A}  \ottsym{\}}  ;  \ottsym{\{}  \ottmv{l_{{\mathrm{2}}}}  \ottsym{\}}  \rightsquigarrow   \{ \}   :   \top }{%
{\ottdrulename{P\_RcdNeq}}{}%
}}


\newcommand{\ottdrulePXXAnd}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{t}  :  \ottnt{A}  ;  \ottsym{\{}  \ottmv{l}  \ottsym{\}}  \rightsquigarrow  \ottnt{t_{{\mathrm{3}}}}  :  \ottnt{A'}}%
\ottpremise{\ottnt{t}  :  \ottnt{B}  ;  \ottsym{\{}  \ottmv{l}  \ottsym{\}}  \rightsquigarrow  \ottnt{t_{{\mathrm{4}}}}  :  \ottnt{B'}}%
}{
\ottnt{t_{{\mathrm{1}}}}  :  \ottnt{A}  \, \& \,  \ottnt{B}  ;  \ottsym{\{}  \ottmv{l}  \ottsym{\}}  \rightsquigarrow  \ottnt{t_{{\mathrm{3}}}}  ;  \ottnt{t_{{\mathrm{4}}}}  :  \ottnt{A'}  \, \& \,  \ottnt{B'}}{%
{\ottdrulename{P\_And}}{}%
}}

\newcommand{\ottdefnproj}[1]{\begin{ottdefnblock}[#1]{$\ottnt{t_{{\mathrm{1}}}}  :  \ottnt{A}  ;  \ottsym{\{}  \ottmv{l}  \ottsym{\}}  \rightsquigarrow  \ottnt{t_{{\mathrm{3}}}}  :  \ottnt{C}$}{\ottcom{Distributive projection}}
\ottusedrule{\ottdrulePXXTop{}}
\ottusedrule{\ottdrulePXXRcdEq{}}
\ottusedrule{\ottdrulePXXRcdNeq{}}
\ottusedrule{\ottdrulePXXAnd{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsProjection}{
\ottdefnproj{}}

% defns DistributiveApplication
%% defn distapp
\newcommand{\ottdruleAXXTop}[1]{\ottdrule[#1]{%
\ottpremise{ \rceil \ottnt{A} \lceil }%
}{
\ottnt{t_{{\mathrm{1}}}}  :  \ottnt{A}  ;  \ottnt{t_{{\mathrm{2}}}}  :  \ottnt{B}  \rightsquigarrow   \{ \}   :   \top }{%
{\ottdrulename{A\_Top}}{}%
}}


\newcommand{\ottdruleAXXArrow}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{t_{{\mathrm{2}}}}  :  \ottnt{C}  \ottsym{<:}  \ottnt{A}  \rightsquigarrow  \ottnt{t_{{\mathrm{3}}}}}%
}{
\ottnt{t_{{\mathrm{1}}}}  :  \ottnt{A}  \rightarrow  \ottnt{B}  ;  \ottnt{t_{{\mathrm{2}}}}  :  \ottnt{C}  \rightsquigarrow  \ottsym{(}  \ottnt{t_{{\mathrm{1}}}}  \ottsym{.}   | \ottnt{A}  \rightarrow  \ottnt{B} |   \ottsym{)} \, \ottnt{t_{{\mathrm{3}}}}  :  \ottnt{B}}{%
{\ottdrulename{A\_Arrow}}{}%
}}


\newcommand{\ottdruleAXXAnd}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{t}  :  \ottnt{A}  ;  \ottnt{t_{{\mathrm{2}}}}  :  \ottnt{C}  \rightsquigarrow  \ottnt{t_{{\mathrm{3}}}}  :  \ottnt{A'}}%
\ottpremise{\ottnt{t}  :  \ottnt{B}  ;  \ottnt{t_{{\mathrm{2}}}}  :  \ottnt{C}  \rightsquigarrow  \ottnt{t_{{\mathrm{4}}}}  :  \ottnt{B'}}%
}{
\ottnt{t_{{\mathrm{1}}}}  :  \ottnt{A}  \, \& \,  \ottnt{B}  ;  \ottnt{t_{{\mathrm{2}}}}  :  \ottnt{C}  \rightsquigarrow  \ottnt{t_{{\mathrm{3}}}}  ;  \ottnt{t_{{\mathrm{4}}}}  :  \ottnt{A'}  \, \& \,  \ottnt{B'}}{%
{\ottdrulename{A\_And}}{}%
}}

\newcommand{\ottdefndistapp}[1]{\begin{ottdefnblock}[#1]{$\ottnt{t_{{\mathrm{1}}}}  :  \ottnt{A}  ;  \ottnt{t_{{\mathrm{2}}}}  :  \ottnt{B}  \rightsquigarrow  \ottnt{t_{{\mathrm{3}}}}  :  \ottnt{C}$}{\ottcom{Distributive application}}
\ottusedrule{\ottdruleAXXTop{}}
\ottusedrule{\ottdruleAXXArrow{}}
\ottusedrule{\ottdruleAXXAnd{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsDistributiveApplication}{
\ottdefndistapp{}}

% defns Elaboration
%% defn elaboration
\newcommand{\ottdruleElaXXTop}[1]{\ottdrule[#1]{%
\ottpremise{  }%
}{
\Gamma  \vdash   \top  \, \Rightarrow \,  \top   \rightsquigarrow   \{ \} }{%
{\ottdrulename{Ela\_Top}}{}%
}}


\newcommand{\ottdruleElaXXTopAbs}[1]{\ottdrule[#1]{%
\ottpremise{  }%
\ottpremise{ \rceil \ottnt{B} \lceil }%
}{
\Gamma  \vdash   \lambda \ottmv{x} .\, \ottnt{e} : \ottnt{A} \rightarrow \ottnt{B}  \, \Rightarrow \, \ottnt{A}  \rightarrow  \ottnt{B}  \rightsquigarrow   \{ \} }{%
{\ottdrulename{Ela\_TopAbs}}{}%
}}


\newcommand{\ottdruleElaXXTopRcd}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{e} \, \Rightarrow \, \ottnt{A}  \rightsquigarrow  \ottnt{t}}%
\ottpremise{ \rceil \ottnt{A} \lceil }%
}{
\Gamma  \vdash  \ottsym{\{}  \ottmv{l}  \ottsym{=}  \ottnt{e}  \ottsym{\}} \, \Rightarrow \, \ottsym{\{}  \ottmv{l}  :  \ottnt{A}  \ottsym{\}}  \rightsquigarrow   \{ \} }{%
{\ottdrulename{Ela\_TopRcd}}{}%
}}


\newcommand{\ottdruleElaXXBase}[1]{\ottdrule[#1]{%
\ottpremise{  }%
}{
\Gamma  \vdash   b  \, \Rightarrow \,  \mathbb{B}   \rightsquigarrow  \ottsym{\{}   |  \mathbb{B}  |   \Rightarrow   \mathsf{ \ottmv{b} }   \ottsym{\}}}{%
{\ottdrulename{Ela\_Base}}{}%
}}


\newcommand{\ottdruleElaXXVar}[1]{\ottdrule[#1]{%
\ottpremise{  }%
\ottpremise{\ottmv{x}  :  \ottnt{A} \, \in \, \Gamma}%
}{
\Gamma  \vdash  \ottmv{x} \, \Rightarrow \, \ottnt{A}  \rightsquigarrow  \ottmv{x}}{%
{\ottdrulename{Ela\_Var}}{}%
}}


\newcommand{\ottdruleElaXXFix}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  ,  \ottmv{x}  :  \ottnt{A}  \vdash  \ottnt{e} \, \Leftarrow \, \ottnt{A}  \rightsquigarrow  \ottnt{t}}%
}{
\Gamma  \vdash   \mathsf{fix} ~ \ottmv{x} .\, \ottnt{e} : \ottnt{A}  \, \Rightarrow \, \ottnt{A}  \rightsquigarrow  \mathsf{fix} \, \ottmv{x}  \ottsym{.}  \ottnt{t}}{%
{\ottdrulename{Ela\_Fix}}{}%
}}


\newcommand{\ottdruleElaXXAbs}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  ,  \ottmv{x}  :  \ottnt{A}  \vdash  \ottnt{e} \, \Leftarrow \, \ottnt{B}  \rightsquigarrow  \ottnt{t}}%
}{
\Gamma  \vdash   \lambda \ottmv{x} .\, \ottnt{e} : \ottnt{A} \rightarrow \ottnt{B}  \, \Rightarrow \, \ottnt{A}  \rightarrow  \ottnt{B}  \rightsquigarrow  \ottsym{\{}   \overrightarrow{  | \ottnt{B} |  }   \Rightarrow  \lambda  \ottmv{x}  \ottsym{.}  \ottnt{t}  \ottsym{\}}}{%
{\ottdrulename{Ela\_Abs}}{}%
}}


\newcommand{\ottdruleElaXXApp}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{e_{{\mathrm{1}}}} \, \Rightarrow \, \ottnt{A}  \rightsquigarrow  \ottnt{t_{{\mathrm{1}}}}}%
\ottpremise{\Gamma  \vdash  \ottnt{e_{{\mathrm{2}}}} \, \Rightarrow \, \ottnt{B'}  \rightsquigarrow  \ottnt{t_{{\mathrm{2}}}}}%
\ottpremise{\ottnt{t_{{\mathrm{1}}}}  :  \ottnt{A}  ;  \ottnt{t_{{\mathrm{2}}}}  :  \ottnt{B'}  \rightsquigarrow  \ottnt{t_{{\mathrm{3}}}}  :  \ottnt{C}}%
}{
\Gamma  \vdash  \ottnt{e_{{\mathrm{1}}}} \, \ottnt{e_{{\mathrm{2}}}} \, \Rightarrow \, \ottnt{C}  \rightsquigarrow  \ottnt{t_{{\mathrm{3}}}}}{%
{\ottdrulename{Ela\_App}}{}%
}}


\newcommand{\ottdruleElaXXRcd}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{e} \, \Rightarrow \, \ottnt{A}  \rightsquigarrow  \ottnt{t}}%
}{
\Gamma  \vdash  \ottsym{\{}  \ottmv{l}  \ottsym{=}  \ottnt{e}  \ottsym{\}} \, \Rightarrow \, \ottsym{\{}  \ottmv{l}  :  \ottnt{A}  \ottsym{\}}  \rightsquigarrow  \ottsym{\{}  \ottsym{\{}  \ottmv{l}  :   | \ottnt{A} |   \ottsym{\}}  \Rightarrow  \ottnt{t}  \ottsym{\}}}{%
{\ottdrulename{Ela\_Rcd}}{}%
}}


\newcommand{\ottdruleElaXXProj}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{e} \, \Rightarrow \, \ottnt{A}  \rightsquigarrow  \ottnt{t_{{\mathrm{1}}}}}%
\ottpremise{\ottnt{t_{{\mathrm{1}}}}  :  \ottnt{A}  ;  \ottsym{\{}  \ottmv{l}  \ottsym{\}}  \rightsquigarrow  \ottnt{t_{{\mathrm{2}}}}  :  \ottnt{B}}%
}{
\Gamma  \vdash  \ottnt{e}  \ottsym{.}  \ottmv{l} \, \Rightarrow \, \ottnt{B}  \rightsquigarrow  \ottnt{t_{{\mathrm{2}}}}}{%
{\ottdrulename{Ela\_Proj}}{}%
}}


\newcommand{\ottdruleElaXXMerge}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{e_{{\mathrm{1}}}} \, \Rightarrow \, \ottnt{A}  \rightsquigarrow  \ottnt{t_{{\mathrm{1}}}}}%
\ottpremise{\Gamma  \vdash  \ottnt{e_{{\mathrm{2}}}} \, \Rightarrow \, \ottnt{B}  \rightsquigarrow  \ottnt{t_{{\mathrm{2}}}}}%
\ottpremise{\ottnt{A}  *  \ottnt{B}}%
}{
\Gamma  \vdash  \ottnt{e_{{\mathrm{1}}}}  \,,,\,  \ottnt{e_{{\mathrm{2}}}} \, \Rightarrow \, \ottnt{A}  \, \& \,  \ottnt{B}  \rightsquigarrow  \ottnt{t_{{\mathrm{1}}}}  ;  \ottnt{t_{{\mathrm{2}}}}}{%
{\ottdrulename{Ela\_Merge}}{}%
}}


\newcommand{\ottdruleElaXXAnno}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{e} \, \Leftarrow \, \ottnt{A}  \rightsquigarrow  \ottnt{t}}%
}{
\Gamma  \vdash  \ottnt{e}  :  \ottnt{A} \, \Rightarrow \, \ottnt{A}  \rightsquigarrow  \ottnt{t}}{%
{\ottdrulename{Ela\_Anno}}{}%
}}


\newcommand{\ottdruleElaXXSub}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{e} \, \Rightarrow \, \ottnt{A}  \rightsquigarrow  \ottnt{t_{{\mathrm{1}}}}}%
\ottpremise{\ottnt{t_{{\mathrm{1}}}}  :  \ottnt{A}  \ottsym{<:}  \ottnt{B}  \rightsquigarrow  \ottnt{t_{{\mathrm{2}}}}}%
}{
\Gamma  \vdash  \ottnt{e} \, \Leftarrow \, \ottnt{B}  \rightsquigarrow  \ottnt{t_{{\mathrm{2}}}}}{%
{\ottdrulename{Ela\_Sub}}{}%
}}

\newcommand{\ottdefnelaboration}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \vdash  \ottnt{e} \, \ottnt{dirflag} \, \ottnt{A}  \rightsquigarrow  \ottnt{t}$}{\ottcom{Elaboration}}
\ottusedrule{\ottdruleElaXXTop{}}
\ottusedrule{\ottdruleElaXXTopAbs{}}
\ottusedrule{\ottdruleElaXXTopRcd{}}
\ottusedrule{\ottdruleElaXXBase{}}
\ottusedrule{\ottdruleElaXXVar{}}
\ottusedrule{\ottdruleElaXXFix{}}
\ottusedrule{\ottdruleElaXXAbs{}}
\ottusedrule{\ottdruleElaXXApp{}}
\ottusedrule{\ottdruleElaXXRcd{}}
\ottusedrule{\ottdruleElaXXProj{}}
\ottusedrule{\ottdruleElaXXMerge{}}
\ottusedrule{\ottdruleElaXXAnno{}}
\ottusedrule{\ottdruleElaXXSub{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsElaboration}{
\ottdefnelaboration{}}

% defns Values
%% defn value
\newcommand{\ottdrulevalueXXunit}[1]{\ottdrule[#1]{%
}{
\ottkw{value} \,  \{ \} }{%
{\ottdrulename{value\_unit}}{}%
}}


\newcommand{\ottdrulevalueXXlit}[1]{\ottdrule[#1]{%
}{
\ottkw{value} \,  \mathsf{ \ottmv{b} } }{%
{\ottdrulename{value\_lit}}{}%
}}


\newcommand{\ottdrulevalueXXabs}[1]{\ottdrule[#1]{%
}{
\ottkw{value} \, \lambda  \ottmv{x}  \ottsym{.}  \ottnt{t}}{%
{\ottdrulename{value\_abs}}{}%
}}


\newcommand{\ottdrulevalueXXmerge}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{value} \, \ottnt{tv_{{\mathrm{1}}}}}%
\ottpremise{\ottkw{value} \, \ottnt{tv_{{\mathrm{2}}}}}%
}{
\ottkw{value} \,  \{  \ottnt{ll}   \Rightarrow   \ottnt{tv_{{\mathrm{1}}}}   ,   \ottnt{tv_{{\mathrm{2}}}}   \} }{%
{\ottdrulename{value\_merge}}{}%
}}

\newcommand{\ottdefnvalue}[1]{\begin{ottdefnblock}[#1]{$\ottkw{value} \, \ottnt{tv}$}{\ottcom{Values}}
\ottusedrule{\ottdrulevalueXXunit{}}
\ottusedrule{\ottdrulevalueXXlit{}}
\ottusedrule{\ottdrulevalueXXabs{}}
\ottusedrule{\ottdrulevalueXXmerge{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsValues}{
\ottdefnvalue{}}

% defns TargetStep
%% defn target_step
\newcommand{\ottdruleTSXXProjOne}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{t}  \rightarrow  \ottnt{t'}}%
}{
\ottnt{t}  \ottsym{.}  \ottnt{ll}  \rightarrow  \ottnt{t'}  \ottsym{.}  \ottnt{ll}}{%
{\ottdrulename{TS\_Proj1}}{}%
}}


\newcommand{\ottdruleTSXXAppL}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{t}  \rightarrow  \ottnt{t'}}%
}{
\ottnt{t} \, \ottnt{t_{{\mathrm{2}}}}  \rightarrow  \ottnt{t'} \, \ottnt{t_{{\mathrm{2}}}}}{%
{\ottdrulename{TS\_AppL}}{}%
}}


\newcommand{\ottdruleTSXXAppR}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{value} \, \ottnt{tv}}%
\ottpremise{\ottnt{t}  \rightarrow  \ottnt{t'}}%
}{
\ottnt{tv} \, \ottnt{t}  \rightarrow  \ottnt{tv} \, \ottnt{t'}}{%
{\ottdrulename{TS\_AppR}}{}%
}}


\newcommand{\ottdruleTSXXMergeL}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{t}  \rightarrow  \ottnt{t'}}%
}{
\ottnt{t}  ;  \ottnt{t_{{\mathrm{2}}}}  \rightarrow  \ottnt{t'}  ;  \ottnt{t_{{\mathrm{2}}}}}{%
{\ottdrulename{TS\_MergeL}}{}%
}}


\newcommand{\ottdruleTSXXMergeR}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{value} \, \ottnt{tv}}%
\ottpremise{\ottnt{t}  \rightarrow  \ottnt{t'}}%
}{
\ottnt{tv}  ;  \ottnt{t}  \rightarrow  \ottnt{tv}  ;  \ottnt{t'}}{%
{\ottdrulename{TS\_MergeR}}{}%
}}


\newcommand{\ottdruleTSXXRcdHead}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{t}  \rightarrow  \ottnt{t'}}%
}{
 \{  \ottnt{ll}   \Rightarrow   \ottnt{t}   ,   \ottnt{t_{{\mathrm{2}}}}   \}   \rightarrow   \{  \ottnt{ll}   \Rightarrow   \ottnt{t'}   ,   \ottnt{t_{{\mathrm{2}}}}   \} }{%
{\ottdrulename{TS\_RcdHead}}{}%
}}


\newcommand{\ottdruleTSXXRcdTail}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{value} \, \ottnt{tv}}%
\ottpremise{\ottnt{t}  \rightarrow  \ottnt{t'}}%
}{
 \{  \ottnt{ll}   \Rightarrow   \ottnt{tv}   ,   \ottnt{t}   \}   \rightarrow   \{  \ottnt{ll}   \Rightarrow   \ottnt{tv}   ,   \ottnt{t'}   \} }{%
{\ottdrulename{TS\_RcdTail}}{}%
}}


\newcommand{\ottdruleTSXXMergeEmpty}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{value} \, \ottnt{tv}}%
}{
 \{ \}   ;  \ottnt{tv}  \rightarrow  \ottnt{tv}}{%
{\ottdrulename{TS\_MergeEmpty}}{}%
}}


\newcommand{\ottdruleTSXXMergeRcd}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{value} \, \ottnt{tv_{{\mathrm{1}}}}}%
\ottpremise{\ottkw{value} \, \ottnt{tv_{{\mathrm{2}}}}}%
\ottpremise{\ottkw{value} \, \ottnt{tv_{{\mathrm{3}}}}}%
}{
\ottsym{(}   \{  \ottnt{ll}   \Rightarrow   \ottnt{tv_{{\mathrm{1}}}}   ,   \ottnt{tv_{{\mathrm{2}}}}   \}   \ottsym{)}  ;  \ottnt{tv_{{\mathrm{3}}}}  \rightarrow   \{  \ottnt{ll}   \Rightarrow   \ottnt{tv_{{\mathrm{1}}}}   ,   \ottsym{(}  \ottnt{tv_{{\mathrm{2}}}}  ;  \ottnt{tv_{{\mathrm{3}}}}  \ottsym{)}   \} }{%
{\ottdrulename{TS\_MergeRcd}}{}%
}}


\newcommand{\ottdruleTSXXProjRcd}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{value} \, \ottnt{tv}}%
\ottpremise{\ottkw{lookup} \, \ottnt{ll} \, \ottnt{tv}  \Rightarrow  \ottnt{t}}%
}{
\ottnt{tv}  \ottsym{.}  \ottnt{ll}  \rightarrow  \ottnt{t}}{%
{\ottdrulename{TS\_ProjRcd}}{}%
}}


\newcommand{\ottdruleTSXXAppAbs}[1]{\ottdrule[#1]{%
}{
\ottsym{(}  \lambda  \ottmv{x}  \ottsym{.}  \ottnt{t}  \ottsym{)} \, \ottnt{tv}  \rightarrow  \ottnt{t}  \ottsym{[}  \ottmv{x}  \mapsto  \ottnt{tv}  \ottsym{]}}{%
{\ottdrulename{TS\_AppAbs}}{}%
}}


\newcommand{\ottdruleTSXXFixpoint}[1]{\ottdrule[#1]{%
}{
\mathsf{fix} \, \ottmv{x}  \ottsym{.}  \ottnt{t}  \rightarrow  \ottnt{t}  \ottsym{[}  \ottmv{x}  \mapsto  \mathsf{fix} \, \ottmv{x}  \ottsym{.}  \ottnt{t}  \ottsym{]}}{%
{\ottdrulename{TS\_Fixpoint}}{}%
}}

\newcommand{\ottdefntargetXXstep}[1]{\begin{ottdefnblock}[#1]{$\ottnt{t}  \rightarrow  \ottnt{t'}$}{\ottcom{Record Calculus Structrual Reduction}}
\ottusedrule{\ottdruleTSXXProjOne{}}
\ottusedrule{\ottdruleTSXXAppL{}}
\ottusedrule{\ottdruleTSXXAppR{}}
\ottusedrule{\ottdruleTSXXMergeL{}}
\ottusedrule{\ottdruleTSXXMergeR{}}
\ottusedrule{\ottdruleTSXXRcdHead{}}
\ottusedrule{\ottdruleTSXXRcdTail{}}
\ottusedrule{\ottdruleTSXXMergeEmpty{}}
\ottusedrule{\ottdruleTSXXMergeRcd{}}
\ottusedrule{\ottdruleTSXXProjRcd{}}
\ottusedrule{\ottdruleTSXXAppAbs{}}
\ottusedrule{\ottdruleTSXXFixpoint{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsTargetStep}{
\ottdefntargetXXstep{}}

% defns ConcatTypes
%% defn concat_typ
\newcommand{\ottdruleCTXXNil}[1]{\ottdrule[#1]{%
}{
 \top   \, \& \,  \ottnt{Bt}  \Rightarrow  \ottnt{Bt}}{%
{\ottdrulename{CT\_Nil}}{}%
}}


\newcommand{\ottdruleCTXXRcd}[1]{\ottdrule[#1]{%
\ottpremise{ \ottkw{lookup} \, \ottnt{ll} \, \ottnt{Bt_{{\mathrm{2}}}}  \Rightarrow  \ottnt{At} ~\lor~ \ottkw{lookup} \, \ottnt{ll} \, \ottnt{Bt_{{\mathrm{2}}}}  \ottsym{=/>} }%
\ottpremise{\ottnt{Bt_{{\mathrm{1}}}}  \, \& \,  \ottnt{Bt_{{\mathrm{2}}}}  \Rightarrow  \ottnt{Ct}}%
}{
\ottsym{(}   \{  \ottnt{ll}   :   \ottnt{At}   ,   \ottnt{Bt_{{\mathrm{1}}}}   \}   \ottsym{)}  \, \& \,  \ottnt{Bt_{{\mathrm{2}}}}  \Rightarrow   \{  \ottnt{ll}   :   \ottnt{At}   ,   \ottnt{Ct}   \} }{%
{\ottdrulename{CT\_Rcd}}{}%
}}

\newcommand{\ottdefnconcatXXtyp}[1]{\begin{ottdefnblock}[#1]{$\ottnt{At}  \, \& \,  \ottnt{Bt}  \Rightarrow  \ottnt{Ct}$}{\ottcom{Concatenate types}}
\ottusedrule{\ottdruleCTXXNil{}}
\ottusedrule{\ottdruleCTXXRcd{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsConcatTypes}{
\ottdefnconcatXXtyp{}}

% defns RecordTypes
%% defn rec_typ
\newcommand{\ottdruleRTXXNil}[1]{\ottdrule[#1]{%
}{
\ottkw{recTyp} \,  \top }{%
{\ottdrulename{RT\_Nil}}{}%
}}


\newcommand{\ottdruleRTXXRcd}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{recTyp} \, \ottnt{Bt}}%
}{
\ottkw{recTyp} \,  \{  \ottnt{ll}   :   \ottnt{At}   ,   \ottnt{Bt}   \} }{%
{\ottdrulename{RT\_Rcd}}{}%
}}

\newcommand{\ottdefnrecXXtyp}[1]{\begin{ottdefnblock}[#1]{$\ottkw{recTyp} \, \ottnt{At}$}{\ottcom{Valid record types}}
\ottusedrule{\ottdruleRTXXNil{}}
\ottusedrule{\ottdruleRTXXRcd{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsRecordTypes}{
\ottdefnrecXXtyp{}}

% defns ContainedByRecTyp
%% defn contained_by_rec_typ
\newcommand{\ottdruleCRTXXHead}[1]{\ottdrule[#1]{%
}{
\ottsym{(}   \{  \ottnt{ll_{{\mathrm{1}}}}   :   \ottnt{At}   ,   \ottnt{Bt}   \}   \ottsym{)}  \rhd  \ottnt{ll_{{\mathrm{1}}}}  :  \ottnt{At}}{%
{\ottdrulename{CRT\_Head}}{}%
}}


\newcommand{\ottdruleCRTXXTail}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{Bt}  \rhd  \ottnt{ll_{{\mathrm{2}}}}  :  \ottnt{Ct}}%
}{
\ottsym{(}   \{  \ottnt{ll_{{\mathrm{1}}}}   :   \ottnt{At}   ,   \ottnt{Bt}   \}   \ottsym{)}  \rhd  \ottnt{ll_{{\mathrm{2}}}}  :  \ottnt{Ct}}{%
{\ottdrulename{CRT\_Tail}}{}%
}}

\newcommand{\ottdefncontainedXXbyXXrecXXtyp}[1]{\begin{ottdefnblock}[#1]{$\ottnt{At}  \rhd  \ottnt{ll}  :  \ottnt{Bt}$}{\ottcom{non-deterministic lookup}}
\ottusedrule{\ottdruleCRTXXHead{}}
\ottusedrule{\ottdruleCRTXXTail{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsContainedByRecTyp}{
\ottdefncontainedXXbyXXrecXXtyp{}}

% defns TargetEqIndexType
%% defn eqIndTypTarget
\newcommand{\ottdruleTEIXXrefl}[1]{\ottdrule[#1]{%
}{
\ottnt{At}  \approx  \ottnt{At}}{%
{\ottdrulename{TEI\_refl}}{}%
}}


\newcommand{\ottdruleTEIXXarrow}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{At_{{\mathrm{1}}}}  \approx  \ottnt{At_{{\mathrm{2}}}}}%
\ottpremise{\ottnt{Bt_{{\mathrm{1}}}}  \approx  \ottnt{Bt_{{\mathrm{2}}}}}%
}{
\ottnt{At_{{\mathrm{1}}}}  \rightarrow  \ottnt{Bt_{{\mathrm{1}}}}  \approx  \ottnt{At_{{\mathrm{2}}}}  \rightarrow  \ottnt{Bt_{{\mathrm{2}}}}}{%
{\ottdrulename{TEI\_arrow}}{}%
}}


\newcommand{\ottdruleTEIXXrcd}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{recTyp} \, \ottnt{Ct}}%
\ottpremise{ \ottkw{lookup} \, \ottnt{ll} \, \ottnt{Ct}  \ottsym{=/>} ~\lor~  (  \ottkw{lookup} \, \ottnt{ll} \, \ottnt{Ct}  \Rightarrow  \ottnt{At'} ~\land~ \ottnt{At'}  \approx  \ottnt{At}  \!)  }%
\ottpremise{\ottnt{At}  \approx  \ottnt{Bt}}%
\ottpremise{\ottnt{Ct}  \approx  \ottnt{Ct'}}%
}{
 \{  \ottnt{ll}   :   \ottnt{At}   ,   \ottnt{Ct}   \}   \approx   \{  \ottnt{ll}   :   \ottnt{Bt}   ,   \ottnt{Ct'}   \} }{%
{\ottdrulename{TEI\_rcd}}{}%
}}


\newcommand{\ottdruleTEIXXcomm}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{recTyp} \, \ottnt{Ct}}%
\ottpremise{ \ottkw{lookup} \, \ottnt{ll_{{\mathrm{1}}}} \, \ottnt{Ct}  \ottsym{=/>} ~\lor~  (  \ottkw{lookup} \, \ottnt{ll_{{\mathrm{1}}}} \, \ottnt{Ct}  \Rightarrow  \ottnt{At'} ~\land~ \ottnt{At'}  \approx  \ottnt{At}  \!)  }%
\ottpremise{ \ottkw{lookup} \, \ottnt{ll_{{\mathrm{2}}}} \, \ottnt{Ct}  \ottsym{=/>} ~\lor~  (  \ottkw{lookup} \, \ottnt{ll_{{\mathrm{2}}}} \, \ottnt{Ct}  \Rightarrow  \ottnt{Bt'} ~\land~ \ottnt{Bt'}  \approx  \ottnt{Bt}  \!)  }%
\ottpremise{ \ottnt{ll_{{\mathrm{1}}}}  \neq  \ottnt{ll_{{\mathrm{2}}}} }%
\ottpremise{ \{  \ottnt{ll_{{\mathrm{2}}}}   :   \ottnt{Bt}   ,   \ottsym{(}   \{  \ottnt{ll_{{\mathrm{1}}}}   :   \ottnt{At}   ,   \ottnt{Ct}   \}   \ottsym{)}   \}   \approx  \ottnt{Ct'}}%
}{
 \{  \ottnt{ll_{{\mathrm{1}}}}   :   \ottnt{At}   ,   \ottsym{(}   \{  \ottnt{ll_{{\mathrm{2}}}}   :   \ottnt{Bt}   ,   \ottnt{Ct}   \}   \ottsym{)}   \}   \approx  \ottnt{Ct'}}{%
{\ottdrulename{TEI\_comm}}{}%
}}


\newcommand{\ottdruleTEIXXdup}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{recTyp} \, \ottnt{Ct}}%
\ottpremise{ \ottkw{lookup} \, \ottnt{ll} \, \ottnt{Ct}  \ottsym{=/>} ~\lor~  (  \ottkw{lookup} \, \ottnt{ll} \, \ottnt{Ct}  \Rightarrow  \ottnt{At'} ~\land~ \ottnt{At'}  \approx  \ottnt{At}  \!)  }%
\ottpremise{\ottnt{At}  \approx  \ottnt{Bt}}%
\ottpremise{ \{  \ottnt{ll}   :   \ottnt{Bt}   ,   \ottsym{(}   \{  \ottnt{ll}   :   \ottnt{At}   ,   \ottnt{Ct}   \}   \ottsym{)}   \}   \approx  \ottnt{Ct'}}%
}{
 \{  \ottnt{ll}   :   \ottnt{At}   ,   \ottsym{(}   \{  \ottnt{ll}   :   \ottnt{Bt}   ,   \ottnt{Ct}   \}   \ottsym{)}   \}   \approx  \ottnt{Ct'}}{%
{\ottdrulename{TEI\_dup}}{}%
}}

\newcommand{\ottdefneqIndTypTarget}[1]{\begin{ottdefnblock}[#1]{$\ottnt{At}  \approx  \ottnt{Bt}$}{\ottcom{Types with the same index}}
\ottusedrule{\ottdruleTEIXXrefl{}}
\ottusedrule{\ottdruleTEIXXarrow{}}
\ottusedrule{\ottdruleTEIXXrcd{}}
\ottusedrule{\ottdruleTEIXXcomm{}}
\ottusedrule{\ottdruleTEIXXdup{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsTargetEqIndexType}{
\ottdefneqIndTypTarget{}}

% defns TargetSubtype
%% defn SubtypeTarget
\newcommand{\ottdruleTSXXtop}[1]{\ottdrule[#1]{%
}{
 \ottnt{At}   \ottsym{<:}    \top  }{%
{\ottdrulename{TS\_top}}{}%
}}


\newcommand{\ottdruleTSXXrefl}[1]{\ottdrule[#1]{%
}{
 \ottnt{At}   \ottsym{<:}   \ottnt{At} }{%
{\ottdrulename{TS\_refl}}{}%
}}


\newcommand{\ottdruleTSXXarrow}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{At_{{\mathrm{1}}}}   \ottsym{<:}   \ottnt{At_{{\mathrm{2}}}} }%
\ottpremise{ \ottnt{Bt_{{\mathrm{1}}}}   \ottsym{<:}   \ottnt{Bt_{{\mathrm{2}}}} }%
}{
 \ottnt{At_{{\mathrm{1}}}}  \rightarrow  \ottnt{Bt_{{\mathrm{1}}}}   \ottsym{<:}   \ottnt{At_{{\mathrm{2}}}}  \rightarrow  \ottnt{Bt_{{\mathrm{2}}}} }{%
{\ottdrulename{TS\_arrow}}{}%
}}


\newcommand{\ottdruleTSXXrcd}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{recTyp} \, \ottnt{Ct'}}%
\ottpremise{\ottkw{lookup} \, \ottnt{ll} \, \ottnt{Ct}  \Rightarrow  \ottnt{Bt}}%
\ottpremise{ \ottnt{Bt}   \ottsym{<:}   \ottnt{At} }%
\ottpremise{ \ottnt{Ct}   \ottsym{<:}   \ottnt{Ct'} }%
}{
 \ottnt{Ct}   \ottsym{<:}    \{  \ottnt{ll}   :   \ottnt{At}   ,   \ottnt{Ct'}   \}  }{%
{\ottdrulename{TS\_rcd}}{}%
}}

\newcommand{\ottdefnSubtypeTarget}[1]{\begin{ottdefnblock}[#1]{$ \ottnt{At}   \ottsym{<:}   \ottnt{Bt} $}{\ottcom{Target Subtyping}}
\ottusedrule{\ottdruleTSXXtop{}}
\ottusedrule{\ottdruleTSXXrefl{}}
\ottusedrule{\ottdruleTSXXarrow{}}
\ottusedrule{\ottdruleTSXXrcd{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsTargetSubtype}{
\ottdefnSubtypeTarget{}}

% defns WellformedTypes
%% defn wf_typ
\newcommand{\ottdruleWFXXNil}[1]{\ottdrule[#1]{%
}{
\vdash   \top }{%
{\ottdrulename{WF\_Nil}}{}%
}}


\newcommand{\ottdruleWFXXBot}[1]{\ottdrule[#1]{%
}{
\vdash   \bot }{%
{\ottdrulename{WF\_Bot}}{}%
}}


\newcommand{\ottdruleWFXXBase}[1]{\ottdrule[#1]{%
}{
\vdash   \mathbb{B} }{%
{\ottdrulename{WF\_Base}}{}%
}}


\newcommand{\ottdruleWFXXRcd}[1]{\ottdrule[#1]{%
\ottpremise{\vdash  \ottnt{At}}%
\ottpremise{\vdash  \ottnt{Bt}}%
\ottpremise{\ottkw{recTyp} \, \ottnt{Bt}}%
\ottpremise{ \ottkw{lookup} \, \ottnt{ll} \, \ottnt{Bt}  \Rightarrow  \ottnt{At'} ~\lor~ \ottkw{lookup} \, \ottnt{ll} \, \ottnt{Bt}  \ottsym{=/>} }%
\ottpremise{\ottnt{At}  \approx  \ottnt{At'}}%
}{
\vdash   \{  \ottnt{ll}   :   \ottnt{At}   ,   \ottnt{Bt}   \} }{%
{\ottdrulename{WF\_Rcd}}{}%
}}


\newcommand{\ottdruleWFXXArrow}[1]{\ottdrule[#1]{%
\ottpremise{\vdash  \ottnt{At}}%
\ottpremise{\vdash  \ottnt{Bt}}%
}{
\vdash  \ottnt{At}  \rightarrow  \ottnt{Bt}}{%
{\ottdrulename{WF\_Arrow}}{}%
}}

\newcommand{\ottdefnwfXXtyp}[1]{\begin{ottdefnblock}[#1]{$\vdash  \ottnt{At}$}{\ottcom{Type wellformedness}}
\ottusedrule{\ottdruleWFXXNil{}}
\ottusedrule{\ottdruleWFXXBot{}}
\ottusedrule{\ottdruleWFXXBase{}}
\ottusedrule{\ottdruleWFXXRcd{}}
\ottusedrule{\ottdruleWFXXArrow{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsWellformedTypes}{
\ottdefnwfXXtyp{}}

% defns WellformedCtx
%% defn wf_ctx
\newcommand{\ottdruleWFCXXNil}[1]{\ottdrule[#1]{%
}{
\vdash   \cdot }{%
{\ottdrulename{WFC\_Nil}}{}%
}}


\newcommand{\ottdruleWFCXXCons}[1]{\ottdrule[#1]{%
\ottpremise{\vdash  \ottnt{At}}%
\ottpremise{\vdash  \Gamma}%
}{
\vdash  \Gamma  ,  \ottmv{x}  :  \ottnt{At}}{%
{\ottdrulename{WFC\_Cons}}{}%
}}

\newcommand{\ottdefnwfXXctx}[1]{\begin{ottdefnblock}[#1]{$\vdash  \Gamma$}{\ottcom{Context wellformedness}}
\ottusedrule{\ottdruleWFCXXNil{}}
\ottusedrule{\ottdruleWFCXXCons{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsWellformedCtx}{
\ottdefnwfXXctx{}}

% defns TargetTyping
%% defn target_typing
\newcommand{\ottdruleTTypingXXBase}[1]{\ottdrule[#1]{%
\ottpremise{  }%
\ottpremise{\vdash  \Gamma}%
}{
\Gamma  \vdash   \mathsf{ \ottmv{b} }   :   \mathbb{B} }{%
{\ottdrulename{TTyping\_Base}}{}%
}}


\newcommand{\ottdruleTTypingXXVar}[1]{\ottdrule[#1]{%
\ottpremise{  }%
\ottpremise{\vdash  \Gamma}%
\ottpremise{\ottmv{x}  :  \ottnt{At} \, \in \, \Gamma}%
}{
\Gamma  \vdash  \ottmv{x}  :  \ottnt{At}}{%
{\ottdrulename{TTyping\_Var}}{}%
}}


\newcommand{\ottdruleTTypingXXAbs}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  ,  \ottmv{x}  :  \ottnt{At}  \vdash  \ottnt{t}  :  \ottnt{Bt}}%
}{
\Gamma  \vdash  \lambda  \ottmv{x}  \ottsym{.}  \ottnt{t}  :  \ottnt{At}  \rightarrow  \ottnt{Bt}}{%
{\ottdrulename{TTyping\_Abs}}{}%
}}


\newcommand{\ottdruleTTypingXXFix}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  ,  \ottmv{x}  :  \ottnt{Bt}  \vdash  \ottnt{t}  :  \ottnt{At}}%
\ottpremise{\ottnt{At}  \approx  \ottnt{Bt}}%
}{
\Gamma  \vdash  \mathsf{fix} \, \ottmv{x}  \ottsym{.}  \ottnt{t}  :  \ottnt{At}}{%
{\ottdrulename{TTyping\_Fix}}{}%
}}


\newcommand{\ottdruleTTypingXXApp}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{t_{{\mathrm{1}}}}  :  \ottnt{At}  \rightarrow  \ottnt{Bt}}%
\ottpremise{\Gamma  \vdash  \ottnt{t_{{\mathrm{2}}}}  :  \ottnt{At'}}%
\ottpremise{\ottnt{At}  \approx  \ottnt{At'}}%
}{
\Gamma  \vdash  \ottnt{t_{{\mathrm{1}}}} \, \ottnt{t_{{\mathrm{2}}}}  :  \ottnt{Bt}}{%
{\ottdrulename{TTyping\_App}}{}%
}}


\newcommand{\ottdruleTTypingXXRcdNil}[1]{\ottdrule[#1]{%
\ottpremise{  }%
\ottpremise{\vdash  \Gamma}%
}{
\Gamma  \vdash   \{ \}   :   \top }{%
{\ottdrulename{TTyping\_RcdNil}}{}%
}}


\newcommand{\ottdruleTTypingXXRcdCons}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{recTyp} \, \ottnt{Bt}}%
\ottpremise{ \ottkw{lookup} \, \ottnt{ll} \, \ottnt{Bt}  \Rightarrow  \ottnt{At'} ~\lor~ \ottkw{lookup} \, \ottnt{ll} \, \ottnt{Bt}  \ottsym{=/>} }%
\ottpremise{\ottnt{At}  \approx  \ottnt{At'}}%
\ottpremise{\Gamma  \vdash  \ottnt{t_{{\mathrm{1}}}}  :  \ottnt{At}}%
\ottpremise{\Gamma  \vdash  \ottnt{t_{{\mathrm{2}}}}  :  \ottnt{Bt}}%
}{
\Gamma  \vdash  \ottsym{(}   \{  \ottnt{ll}   \Rightarrow   \ottnt{t_{{\mathrm{1}}}}   ,   \ottnt{t_{{\mathrm{2}}}}   \}   \ottsym{)}  :  \ottsym{(}   \{  \ottnt{ll}   :   \ottnt{At}   ,   \ottnt{Bt}   \}   \ottsym{)}}{%
{\ottdrulename{TTyping\_RcdCons}}{}%
}}


\newcommand{\ottdruleTTypingXXRcdProj}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{t}  :  \ottnt{At}}%
\ottpremise{\ottkw{lookup} \, \ottnt{ll} \, \ottnt{At}  \Rightarrow  \ottnt{Bt}}%
}{
\Gamma  \vdash  \ottnt{t}  \ottsym{.}  \ottnt{ll}  :  \ottnt{Bt}}{%
{\ottdrulename{TTyping\_RcdProj}}{}%
}}


\newcommand{\ottdruleTTypingXXRcdMerge}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{recTyp} \, \ottnt{At}}%
\ottpremise{\ottkw{recTyp} \, \ottnt{Bt}}%
\ottpremise{\Gamma  \vdash  \ottnt{t_{{\mathrm{1}}}}  :  \ottnt{At}}%
\ottpremise{\Gamma  \vdash  \ottnt{t_{{\mathrm{2}}}}  :  \ottnt{Bt}}%
\ottpremise{\ottnt{At}  \, \& \,  \ottnt{Bt}  \Rightarrow  \ottnt{Ct}}%
}{
\Gamma  \vdash  \ottnt{t_{{\mathrm{1}}}}  ;  \ottnt{t_{{\mathrm{2}}}}  :  \ottnt{Ct}}{%
{\ottdrulename{TTyping\_RcdMerge}}{}%
}}

\newcommand{\ottdefntargetXXtyping}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \vdash  \ottnt{t}  :  \ottnt{At}$}{\ottcom{Target typing}}
\ottusedrule{\ottdruleTTypingXXBase{}}
\ottusedrule{\ottdruleTTypingXXVar{}}
\ottusedrule{\ottdruleTTypingXXAbs{}}
\ottusedrule{\ottdruleTTypingXXFix{}}
\ottusedrule{\ottdruleTTypingXXApp{}}
\ottusedrule{\ottdruleTTypingXXRcdNil{}}
\ottusedrule{\ottdruleTTypingXXRcdCons{}}
\ottusedrule{\ottdruleTTypingXXRcdProj{}}
\ottusedrule{\ottdruleTTypingXXRcdMerge{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsTargetTyping}{
\ottdefntargetXXtyping{}}

% defns TargetFlexTyping
%% defn target_flex_typing
\newcommand{\ottdruleTFTypingXXOrig}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{t}  :  \ottnt{At}}%
}{
\Gamma  \vdash  \ottnt{t}  \Leftarrow  \ottnt{At}}{%
{\ottdrulename{TFTyping\_Orig}}{}%
}}


\newcommand{\ottdruleTFTypingXXTop}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{t}  :  \ottnt{At}}%
}{
\Gamma  \vdash  \ottnt{t}  \Leftarrow   \top }{%
{\ottdrulename{TFTyping\_Top}}{}%
}}


\newcommand{\ottdruleTFTypingXXPart}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{t}  :  \ottnt{At}}%
\ottpremise{\ottkw{lookup} \, \ottnt{ll} \, \ottnt{At}  \Rightarrow  \ottnt{Bt}}%
}{
\Gamma  \vdash  \ottnt{t}  \Leftarrow  \ottsym{\{}  \ottnt{ll}  :  \ottnt{Bt}  \ottsym{\}}}{%
{\ottdrulename{TFTyping\_Part}}{}%
}}


\newcommand{\ottdruleTFTypingXXCons}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{t}  \Leftarrow  \ottsym{\{}  \ottnt{ll}  :  \ottnt{At}  \ottsym{\}}}%
\ottpremise{\Gamma  \vdash  \ottnt{t}  \Leftarrow  \ottnt{Bt}}%
}{
\Gamma  \vdash  \ottnt{t}  \Leftarrow   \{  \ottnt{ll}   :   \ottnt{At}   ,   \ottnt{Bt}   \} }{%
{\ottdrulename{TFTyping\_Cons}}{}%
}}


\newcommand{\ottdruleTFTypingXXSim}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{t}  \Leftarrow  \ottnt{At}}%
\ottpremise{\ottnt{At}  \approx  \ottnt{Bt}}%
}{
\Gamma  \vdash  \ottnt{t}  \Leftarrow  \ottnt{Bt}}{%
{\ottdrulename{TFTyping\_Sim}}{}%
}}

\newcommand{\ottdefntargetXXflexXXtyping}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \vdash  \ottnt{t}  \Leftarrow  \ottnt{At}$}{\ottcom{Target flex typing}}
\ottusedrule{\ottdruleTFTypingXXOrig{}}
\ottusedrule{\ottdruleTFTypingXXTop{}}
\ottusedrule{\ottdruleTFTypingXXPart{}}
\ottusedrule{\ottdruleTFTypingXXCons{}}
\ottusedrule{\ottdruleTFTypingXXSim{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsTargetFlexTyping}{
\ottdefntargetXXflexXXtyping{}}

\newcommand{\ottdefnss}{
\ottdefnsTopLikeType
\ottdefnsEqIndexType
\ottdefnsSplitType
\ottdefnsOrdinaryType
\ottdefnsDisjoint
\ottdefnsCoMerge
\ottdefnsCoSubtyping
\ottdefnsProjection
\ottdefnsDistributiveApplication
\ottdefnsElaboration
\ottdefnsValues
\ottdefnsTargetStep
\ottdefnsConcatTypes
\ottdefnsRecordTypes
\ottdefnsContainedByRecTyp
\ottdefnsTargetEqIndexType
\ottdefnsTargetSubtype
\ottdefnsWellformedTypes
\ottdefnsWellformedCtx
\ottdefnsTargetTyping
\ottdefnsTargetFlexTyping
}

\newcommand{\ottall}{\ottmetavars\\[0pt]
\ottgrammar\\[5.0mm]
\ottdefnss}

